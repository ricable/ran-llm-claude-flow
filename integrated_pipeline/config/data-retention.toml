# Data Retention and Archiving Configuration\n# Production Analytics Phase 4 - Enterprise Data Management\n\n[general]\nversion = \"1.0.0\"\ndescription = \"Production analytics data retention and archiving policies\"\nlast_updated = \"2025-08-23T15:15:00Z\"\n\n# Data retention periods in days\n[retention_periods]\n# Real-time metrics (high frequency, short retention)\nreal_time_metrics = 7\n\n# Aggregated metrics (lower frequency, longer retention)\nhourly_aggregates = 90\ndaily_aggregates = 365\nweekly_aggregates = 1095  # 3 years\nmonthly_aggregates = 2555  # 7 years\n\n# Analytics insights and ML models\ninsights = 180\nml_models = 365\ntraining_data = 730  # 2 years\n\n# Business intelligence reports\nbi_reports = 1095  # 3 years\nexecutive_reports = 2555  # 7 years\ncompliance_reports = 3650  # 10 years (regulatory requirement)\n\n# SLA monitoring and breach records\nsla_metrics = 2555  # 7 years\nbreach_records = 3650  # 10 years (regulatory requirement)\npenalty_calculations = 3650  # 10 years\n\n# Predictive maintenance data\nmaintenance_schedules = 1095  # 3 years\nfailure_predictions = 730  # 2 years\nhealth_scores = 365\ncomponent_metrics = 180\n\n# Audit and security logs\naudit_logs = 2555  # 7 years (regulatory requirement)\nsecurity_events = 2555  # 7 years\napi_access_logs = 365\nuser_activity = 730  # 2 years\n\n# Data archiving configuration\n[archiving]\n# Enable automatic archiving\nenabled = true\n\n# Archive compression settings\ncompression_algorithm = \"zstd\"  # Options: gzip, zstd, lz4\ncompression_level = 3  # 1-22 for zstd, 1-9 for gzip\n\n# Archive storage locations\n[archiving.storage]\nprimary_path = \"/data/analytics/archives\"\nbackup_path = \"/backup/analytics/archives\"\ncloud_storage = \"s3://company-analytics-archives\"\n\n# Archive format and structure\n[archiving.format]\nformat = \"parquet\"  # Options: parquet, avro, json, csv\npartitioning = [\"year\", \"month\", \"service_id\"]\nmax_file_size_mb = 256\nmax_records_per_file = 1000000\n\n# Archive schedule\n[archiving.schedule]\n# Daily archiving for real-time data\ndaily_archive_hour = 2  # 2 AM UTC\n\n# Weekly archiving for aggregated data\nweekly_archive_day = \"sunday\"\nweekly_archive_hour = 3  # 3 AM UTC\n\n# Monthly archiving for long-term data\nmonthly_archive_day = 1  # First day of month\nmonthly_archive_hour = 4  # 4 AM UTC\n\n# Data cleanup configuration\n[cleanup]\n# Enable automatic cleanup of expired data\nenabled = true\n\n# Safety margin before deletion (days)\nsafety_margin = 7\n\n# Cleanup schedule\ncleanup_hour = 1  # 1 AM UTC daily\n\n# Batch size for deletion operations\nbatch_size = 10000\n\n# Verification before deletion\nverify_before_delete = true\n\n# Performance settings\n[performance]\n# Maximum concurrent archive operations\nmax_concurrent_archives = 4\n\n# Maximum concurrent cleanup operations\nmax_concurrent_cleanups = 2\n\n# I/O rate limiting (MB/s)\nmax_io_rate_mbs = 100\n\n# Memory limit for operations (MB)\nmax_memory_mb = 2048\n\n# Database configuration for retention tracking\n[database]\n# Connection settings\ntype = \"postgresql\"  # Options: postgresql, mysql, sqlite\nhost = \"localhost\"\nport = 5432\ndatabase = \"analytics_retention\"\nusername = \"analytics_user\"\npassword_env = \"ANALYTICS_DB_PASSWORD\"\n\n# Connection pool settings\nmax_connections = 20\nmin_connections = 5\nconnection_timeout_seconds = 30\nidle_timeout_seconds = 600\n\n# Retention tracking tables\n[database.tables]\nretention_log = \"retention_operations\"\narchive_index = \"archived_data_index\"\ncleanup_log = \"cleanup_operations\"\ndata_lineage = \"data_lineage_tracking\"\n\n# Monitoring and alerting\n[monitoring]\n# Enable monitoring of retention operations\nenabled = true\n\n# Metrics to track\nmetrics = [\n    \"archive_operations_count\",\n    \"archive_size_bytes\",\n    \"cleanup_operations_count\",\n    \"cleanup_deleted_records\",\n    \"retention_policy_violations\",\n    \"storage_usage_percentage\",\n    \"operation_duration_seconds\"\n]\n\n# Alert thresholds\n[monitoring.alerts]\n# Storage usage alerts\nstorage_usage_warning = 80  # Percentage\nstorage_usage_critical = 95  # Percentage\n\n# Operation failure alerts\narchive_failure_threshold = 3  # Consecutive failures\ncleanup_failure_threshold = 2  # Consecutive failures\n\n# Performance alerts\noperation_timeout_minutes = 120\nslow_operation_threshold_minutes = 30\n\n# Notification channels\nnotification_channels = [\n    \"email:analytics-team@company.com\",\n    \"slack:#analytics-alerts\",\n    \"pagerduty:analytics-service\"\n]\n\n# Compliance and governance\n[compliance]\n# Regulatory compliance settings\nregulations = [\"GDPR\", \"SOX\", \"HIPAA\", \"PCI-DSS\"]\n\n# Data subject rights (GDPR)\n[compliance.gdpr]\nenable_right_to_erasure = true\nenable_data_portability = true\ndata_processor = \"Analytics Team\"\ndata_controller = \"Company Inc.\"\nlegal_basis = \"legitimate_interest\"\n\n# SOX compliance (financial data)\n[compliance.sox]\nfinancial_data_retention = 2555  # 7 years\naudit_trail_required = true\nimmutable_archives = true\n\n# HIPAA compliance (healthcare data)\n[compliance.hipaa]\nhealth_data_retention = 2190  # 6 years\nencryption_required = true\naccess_logging = true\n\n# Security settings\n[security]\n# Encryption settings\n[security.encryption]\nenable_at_rest = true\nenable_in_transit = true\nalgorithm = \"AES-256-GCM\"\nkey_rotation_days = 90\n\n# Access control\n[security.access]\nauthentication_required = true\nauthorization_model = \"RBAC\"\nmin_privilege_level = \"analytics_read\"\n\n# Audit logging\n[security.audit]\nlog_all_operations = true\nlog_data_access = true\nlog_retention_days = 2555  # 7 years\n\n# Backup and disaster recovery\n[backup]\n# Enable automatic backups of archived data\nenabled = true\n\n# Backup frequency\nfull_backup_frequency = \"weekly\"\nincremental_backup_frequency = \"daily\"\n\n# Backup retention\nfull_backup_retention_weeks = 52  # 1 year\nincremental_backup_retention_days = 30\n\n# Backup locations\nlocal_backup_path = \"/backup/analytics\"\nremote_backup_url = \"s3://company-analytics-backups\"\n\n# Backup verification\nverify_backups = true\nverification_sample_rate = 0.1  # 10% of files\n\n# Disaster recovery settings\n[disaster_recovery]\n# Recovery time objective (hours)\nrto_hours = 24\n\n# Recovery point objective (hours)\nrpo_hours = 4\n\n# Replication settings\nenable_replication = true\nreplication_target = \"s3://company-dr-analytics\"\nreplication_frequency = \"hourly\"\n\n# Testing and validation\n[testing]\n# Enable periodic testing of retention policies\nenabled = true\n\n# Test schedules\nmonthly_retention_test = true\nquarterly_restore_test = true\nannual_disaster_recovery_test = true\n\n# Test data settings\ntest_data_size_gb = 10\ntest_data_retention_days = 30\n\n# Integration settings\n[integrations]\n# External systems integration\n[integrations.analytics_api]\nendpoint = \"http://localhost:8080/api/v1\"\napi_key_env = \"ANALYTICS_API_KEY\"\ntimeout_seconds = 30\n\n[integrations.monitoring]\nprometheus_endpoint = \"http://localhost:9090\"\ngrafana_dashboard_id = \"analytics-retention\"\n\n[integrations.alerting]\nslack_webhook_env = \"SLACK_WEBHOOK_URL\"\nemail_smtp_server = \"smtp.company.com\"\nemail_from = \"analytics-alerts@company.com\"\n\n# Custom retention rules\n[custom_rules]\n# Service-specific retention overrides\n[custom_rules.critical_services]\nservices = [\"payment-api\", \"user-authentication\", \"fraud-detection\"]\nextended_retention_days = 2555  # 7 years for critical services\n\n# High-value data retention\n[custom_rules.high_value_data]\nmetrics = [\"revenue\", \"user_conversion\", \"churn_rate\"]\nextended_retention_days = 1825  # 5 years\n\n# Temporary data with shorter retention\n[custom_rules.temporary_data]\nmetrics = [\"debug_logs\", \"test_metrics\", \"development_data\"]\nshort_retention_days = 30\n\n# Data quality and validation\n[data_quality]\n# Enable data quality checks before archiving\nenabled = true\n\n# Quality checks to perform\nchecks = [\n    \"completeness\",\n    \"consistency\",\n    \"accuracy\",\n    \"uniqueness\",\n    \"validity\"\n]\n\n# Quality thresholds\nmin_completeness_percentage = 95.0\nmax_duplicate_percentage = 1.0\nmax_invalid_records_percentage = 2.0\n\n# Actions on quality failures\nfail_archiving_on_quality_issues = true\nnotify_on_quality_issues = true\nquarantine_bad_data = true\n\n# Resource management\n[resources]\n# Disk space management\nmax_disk_usage_percentage = 85\nmin_free_space_gb = 100\n\n# Memory management\nmax_memory_usage_percentage = 80\ngarbage_collection_frequency = \"hourly\"\n\n# CPU management\nmax_cpu_usage_percentage = 70\nthrottle_operations_on_high_cpu = true\n\n# Network bandwidth management\nmax_network_bandwidth_mbps = 1000\nrate_limit_network_operations = true\n\n# Cost optimization\n[cost_optimization]\n# Enable cost optimization features\nenabled = true\n\n# Storage tiering\nenable_storage_tiering = true\nhot_storage_days = 30  # Recent data on fast storage\nwarm_storage_days = 90  # Older data on standard storage\ncold_storage_days = 365  # Archive data on cold storage\n\n# Compression optimization\noptimize_compression = true\nrecompress_old_data = true\nrecompression_age_days = 180\n\n# Deduplication\nenable_deduplication = true\ndeduplication_window_days = 7\n\n# Analytics and reporting\n[analytics]\n# Generate analytics on retention operations\nenabled = true\n\n# Reports to generate\nreports = [\n    \"storage_usage_trends\",\n    \"retention_policy_effectiveness\",\n    \"cost_analysis\",\n    \"compliance_status\",\n    \"performance_metrics\"\n]\n\n# Report generation schedule\ndaily_reports = true\nweekly_reports = true\nmonthly_reports = true\nquarterly_reports = true\n\n# Report distribution\nreport_recipients = [\n    \"analytics-team@company.com\",\n    \"data-governance@company.com\"\n]\n\n# Experimental features\n[experimental]\n# Enable experimental features (use with caution)\nenabled = false\n\n# Machine learning for retention optimization\nml_retention_optimization = false\n\n# Predictive storage planning\npredictive_storage_planning = false\n\n# Automated policy adjustment\nautomated_policy_adjustment = false\n\n# Advanced compression algorithms\nadvanced_compression = false\n"